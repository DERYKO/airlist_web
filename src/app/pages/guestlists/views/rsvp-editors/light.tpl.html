<h1>Edit Booking details</h1>
<form ng-submit="vm.save(rsvpEditor)" name="rsvpEditor"
      ng-class="{'submitted':rsvpEditor.$submitted}"
      novalidate>
    <section>
        <div class="content-box" ng-if="vm.contact">
            <div class="box-section-wrap edit-screen">
                <div class="user-avatar">
                    <customfield name="profile_image" definition="{type:'media_image', startDirectory: 'contacts'}" ng-model="vm.contact.profile_image"></customfield>
                </div>
                <div class="user-general-info">
                    <fieldset>
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" ng-model="vm.contact.title" name="title"
                                   placeholder="e.g. Prof. Dr.">
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" ng-model="vm.contact.first_name" name="first_name">
                        </div>
                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" ng-model="vm.contact.last_name" name="last_name">
                        </div>
                        <div class="form-group">
                            <label>Sex</label>
                            <select name="sex" ng-model="vm.contact.sex" ng-options="k as v for (k, v) in vm.deposits.genders"></select>
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="form-group">
                            <label>Birthday</label>
                            <customfield ng-model="vm.contact.birth_day" definition="{type:'date'}"
                                         name="birth_day"></customfield>
                        </div>
                        <div class="form-group">
                            <label>Language</label>
                            <select name="language" id="language" ng-model="vm.contact.language" ng-options="k as v for (k, v) in vm.deposits.languages"></select>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" ng-model="vm.contact.email" name="email">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </section>

    <h2>RSVP info</h2>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <fieldset>
                    <div class="form-group">
                        <label>Status</label>
                        <select name="status" ng-model="vm.rsvp.status" ng-options="k as v for (k, v) in vm.deposits.states"></select>
                    </div>
                    <div class="form-group" ng-if="vm.parent_rsvp_config">
                        <label>Guest Of</label>
                        <select-box
                                model="vm.rsvp.parent_rsvp_id"
                                config="vm.parent_rsvp_config"
                                value-field="id"
                                display-field="contact.data.full_name">
                        </select-box>
                    </div>
                </fieldset>
                    <div class="form-group">
                        <label>Pax Planned</label>
                        <input ng-model="vm.rsvp.pax_planned" type="text"
                               name="pax_planned">
                    </div>
                    <div class="form-group">
                        <label>Pax Actual</label>
                        <input ng-model="vm.rsvp.pax_actual" type="text"
                               name="pax_actual">
                    </div>
                    <div class="form-group">
                        <label>Pax Max</label>
                        <input ng-model="vm.rsvp.pax_max" type="text"
                               name="pax_max">
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group">
                        <label>Priority</label>
                        <select name="priority" ng-model="vm.rsvp.priority">
                            <option value="a">a</option>
                            <option value="b">b</option>
                            <option value="c">c</option>
                            <option value="d">d</option>
                            <option value="e">e</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Comment</label>
                        <textarea ng-model="vm.rsvp.comment" name="comment"
                                  rows="5"></textarea>
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group" ng-repeat="field in vm.customFields track by $index">
                        <label for="{{field.key}}">{{field.title}}</label>
                        <customfield ng-model="vm.rsvp[field.key]" definition="field" name="field.key"
                                     id="{{field.key}}"></customfield>
                    </div>
                </fieldset>
            </div>
        </div>
    </section>

    <h2>Address details</h2>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <h3>Private</h3>
                <fieldset>
                    <div class="form-group">
                        <label>Street</label>
                        <input type="text" ng-model="vm.contact.street" name="street">
                    </div>
                    <div class="form-group">
                        <label>Street 2</label>
                        <input type="text" ng-model="vm.contact.street_2" name="street_2">
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group">
                        <label>ZIP</label>
                        <input type="text" ng-model="vm.contact.zip" name="zip">
                    </div>
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" ng-model="vm.contact.city" name="city">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select name="country" id="country" ng-model="vm.contact.country" ng-options="k as v for (k, v) in vm.deposits.countries"></select>
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group">
                        <label>Mobile</label>
                        <input type="text" ng-model="vm.contact.phone_2" name="phone_2">
                    </div>
                    <div class="form-group">
                        <label>Phone (Landline)</label>
                        <input type="text" ng-model="vm.contact.phone" name="phone">
                    </div>
                    <div class="form-group">
                        <label>Fax</label>
                        <input type="text" ng-model="vm.contact.fax" name="fax">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="text" ng-model="vm.contact.email" name="email">
                    </div>
                    <div class="form-group">
                        <label>Web</label>
                        <input type="text" ng-model="vm.contact.web" name="web">
                    </div>
                </fieldset>
            </div>
        </div>
    </section>

    <h2>Business</h2>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <fieldset>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" ng-model="vm.contact.company_name"
                               name="company_ne">
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <input type="text" ng-model="vm.contact.department"
                               name="department">
                    </div>
                    <div class="form-group">
                        <label>Position</label>
                        <input type="text" ng-model="vm.contact.position" name="position">
                    </div>
                </fieldset>
            </div>
        </div>
    </section>

    <h2>Extended info</h2>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <fieldset>
                    <div class="form-group">
                        <label>Always CC this email</label>
                        <customfield ng-model="vm.contact.email_cc"
                                     definition="{type:'textbox'}"
                                     name="notify_email_cc"></customfield>
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group">
                        <label>Blacklist</label>
                        <customfield ng-model="vm.contact.blacklist"
                                     definition="{type:'boolean'}"
                                     name="blacklist"></customfield>
                    </div>
                    <div class="form-group">
                        <label>Blacklist Reason</label>
                        <textarea name="blacklist_reason"
                                  ng-model="vm.contact.blacklist_reason"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Block Emails</label>
                        <customfield ng-model="vm.contact.block_email"
                                     definition="{type:'boolean'}"
                                     name="block_email"></customfield>
                    </div>
                    <div class="form-group" ng-if="user.rights.messages.send-sms">
                        <label>Block sms</label>
                        <customfield ng-model="vm.contact.block_sms"
                                     definition="{type:'boolean'}"
                                     name="block_sms"></customfield>
                    </div>
                </fieldset>
                <fieldset>
                    <div class="form-group">
                        <label>Comment</label>
                        <textarea name="comment" ng-model="vm.contact.comment"></textarea>
                    </div>
                </fieldset>
            </div>
            <div class="box-section-wrap">
                <h3>Custom attributes</h3>
                <fieldset>
                    <div class="form-group"
                         ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]"
                         ng-if="vm.schema.properties['custom_'+i]">
                        <customfield ng-model="vm.contact['custom_'+i]"
                                     definition="vm.schema.properties['custom_'+i].original"
                                     name="{{'custom_'+i}}"></customfield>
                    </div>
                </fieldset>
            </div>
        </div>
    </section>

    <section>
        <div class="fixed-footer">
            <div class="btn-group">
                <button type="button" ng-click="vm.close()">Cancel</button>
                <button type="submit" class="btn-confirm">Save</button>
            </div>
        </div>
    </section>
</form>
