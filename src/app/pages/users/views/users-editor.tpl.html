<h1>Edit profile {{ vm.user.first_name }} {{ vm.user.last_name }}</h1>

<form ng-submit="vm.save(vm.user)" name="profileForm"
      ng-class="{'submitted':profileForm.$submitted}" class="edit-screen" novalidate>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <div class="user-avatar">
                    <customfield name="image" definition="{type:'media_image'}" ng-model="vm.user.profile_image" ng-if="vm.user.editable"></customfield>
                    <img ng-src="{{ vm.originalUser.profile_image.url }}" ng-if="!vm.user.editable" class="user"/>
                </div>
                <div class="user-general-info">
                    <fieldset>
                        <div class="form-group">
                            <label>{{'profile.first_name' | i18n }}</label>
                            <input type="text" ng-model="vm.user.first_name" ng-disabled="!vm.user.editable"
                                   name="first_name">
                        </div>
                        <div class="form-group">
                            <label>{{'profile.last_name' | i18n }}</label>
                            <input type="text" ng-model="vm.user.last_name" ng-disabled="!vm.user.editable"
                                   name="last_name">
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="form-group">
                            <label>{{'profile.email' | i18n }}</label>
                            <input type="text" ng-model="vm.user.email"
                                   name="email"
                                   ng-disabled="true">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </section>

    <h2>Roles</h2>
    <section>
        <div class="content-box">
            <div class="box-section-wrap">
                <div class="form-group" ng-repeat="role in vm.roles">
                    <label>{{role.name}}</label>
                    <customfield definition="{type:'boolean'}"
                                 ng-model="vm.user.roles[role.id]"></customfield>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="fixed-footer">
            <div class="btn-group">
                <button class="btn-warning" ng-click="vm.cancel()" type="button">Discard Changes</button>
                <button type="submit" class="btn-confirm">Done</button>
            </div>
        </div>
    </section>

</form>
